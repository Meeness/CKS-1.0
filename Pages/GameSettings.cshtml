@page
@model GameSettingsModel
@{
    ViewData["Title"] = "Game Settings";
}
<section class="main">
<div class="grid-container">
  <div class="Page-name"><p id="header">GAME SETTINGS</p></div>
  <p>@Model.CK.wifiHandler.teststring</p>
  @if(Model.CK.ActiveGame.Gamemode.Id==1){
    <div class="Team-x"> <!-- Gamemode 1 -->
      <label for="teamx"></label>
      <form method="post"> <!-- Team 1 name -->
        <input type="hidden" value="0" name="teamindex"/>
        <input type="text" id="teamx" name="teamname" value="@Model.CK.ActiveGame.Gamemode.Teams[0].Name" onfocusout="this.form.submit()">
      </form>
    </div>
    <div class="Team-y">
      <label for="teamy"></label>
      <form method="post"> <!-- Team 2 name -->
        <input type="hidden" value="1" name="teamindex"/>
        <input type="text" id="teamy" name="teamname" value="@Model.CK.ActiveGame.Gamemode.Teams[1].Name" onfocusout="this.form.submit()">
      </form>
    </div>
    <div class="Teamx-players">
      <ul class="playerslist"> <!-- Team 1 -->
        @foreach (var player in Model.CK.ActiveGame.Gamemode.Teams[0].Players)
        {
          <li>
            @System.Text.Encoding.UTF8.GetString(player.Client.CKInv.Items[0].Value)

            
            <form method="post">
              <select class="teamselect" name="teamselect" onchange="this.form.submit()">
                <option value="@player.Id 0">Available Players</option>
                @foreach (var team in Model.CK.ActiveGame.Gamemode.Teams){
                  if(player.TeamId==team.Id){
                    <option value="@player.Id @team.Id" selected>@team.Name</option>
                  }else{
                    <option value="@player.Id @team.Id">@team.Name</option>
                  }
                }
              </select>
            </form>
          </li>
        }
      </ul>
    </div>
    <div class="Teamy-players">
      <ul class="playerslist"> <!-- Team 2 -->
        @foreach (var player in Model.CK.ActiveGame.Gamemode.Teams[1].Players)
        {
          <li>
            
            @System.Text.Encoding.UTF8.GetString(player.Client.CKInv.Items[0].Value)
            <form method="post">
              <select class="teamselect" name="teamselect" onchange="this.form.submit()">
                <option value="@player.Id 0">Available Players</option>
                @foreach (var team in Model.CK.ActiveGame.Gamemode.Teams){
                  if(player.TeamId==team.Id){
                    <option value="@player.Id @team.Id" selected>@team.Name</option>
                  }else{
                    <option value="@player.Id @team.Id">@team.Name</option>
                  }
                }
              </select>
            </form>
          </li>
        }
      </ul>
    </div>
  }
  @if(Model.CK.ActiveGame.Gamemode.Id==2) 
  {
    <link rel="stylesheet" href="~/css/deathmatch.css" />
    <div class="Team-x">  <!-- Gamemode 2 -->
      <label for="teamx"></label>
      <form method="post"> <!-- Team 1 name -->
        <input type="hidden" value="0" name="teamindex"/>
        <input type="text" id="teamx" name="teamname" value="@Model.CK.ActiveGame.Gamemode.Teams[0].Name" onfocusout="this.form.submit()">
      </form>
    </div>
    <div class="Teamx-players"> <!-- Team 1 -->
      <ul class="playerslist">
        @foreach (var player in Model.CK.ActiveGame.Gamemode.Teams[0].Players)
        {
          <li> 
            @System.Text.Encoding.UTF8.GetString(player.Client.CKInv.Items[0].Value)
            <form method="post">
              <select class="teamselect" name="teamselect" onchange="this.form.submit()">
                <option value="@player.Id 0">Available Players</option>
                @foreach (var team in Model.CK.ActiveGame.Gamemode.Teams){
                  if(player.TeamId==team.Id){
                    <option value="@player.Id @team.Id" selected>@team.Name</option>
                  }else{
                    <option value="@player.Id @team.Id">@team.Name</option>
                  }
                }
              </select>
            </form>
          </li>
        }
      </ul>
    </div>
  }

  
  <div class="Script-name">
<label for="scripts" id="script">Game script</label>
<br>
<form method="post"> <!-- Gamemode Select -->
  <select id="scripts" name="modeselect" onchange="this.form.submit()">
    @foreach(var gamemode in Model.CK.ActiveGame.GamemodeList){
      if(gamemode.Id==Model.CK.ActiveGame.Gamemode.Id){
        <option value="@gamemode.Id" selected>@gamemode.Name</option>
      }
      else{
        <option value="@gamemode.Id">@gamemode.Name</option>
      }
      
    }
  </select>
</form>
  </div>
  <div class="players"><label id="script">Available players</label></div>
  <div class="AVPLAYERS"> <!-- Available players -->
    <ul class="playerslist">
      @foreach (var player in Model.CK.ActiveGame.AvailPlayers)
      {
        <li>
          
          @System.Text.Encoding.UTF8.GetString(player.Client.CKInv.Items[0].Value)
          <form method="post">
            <select class="teamselect" name="teamselect" onchange="this.form.submit()">
              <option value="">Available Players</option>
              @foreach (var team in Model.CK.ActiveGame.Gamemode.Teams){
                <option value="@player.Id @team.Id">@team.Name</option>
              }
            </select>
          </form>
        </li>
      }
    </ul>
  </div>
  <div class="Timer">
        <div class="container">
    <!-- form -->
    <form class="form">
      <!-- countdown time input field -->
      <input type="number" min="1" class="time-input" placeholder="Enter Game duration">
      <!-- options --> <!-- hours and seconds removed and are here  <option value="hours">Hours</option>         <option value="seconds">Seconds</option> -->
      <select name="format">
        <option value="minutes">Minutes</option>
      </select>
      <!-- submit button or set button -->
      <button type="submit" class="set-btn">SET</button>
    </form>
    <!-- countdown text -->
    <p class="countdown">00 : 00 : 00</p>

    <!-- buttons -->
    <div class="buttons">
      <button class="stop-btn" disabled>STOP</button>
      <button class="reset-btn" disabled>RESET</button>
    </div>
  </div>
  </div>
</div>
</section>